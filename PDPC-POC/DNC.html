<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PDPC - Data Breach Notification</title>

<link href="https://eservice.pdpc.gov.sg/case/resources/img/pdpc.ico" rel="Shortcut Icon">

<link href="./PDPC_files/bootstrap.min.css" rel="stylesheet">
<link href="./PDPC_files/bootstrap-datepicker3.min.css" rel="stylesheet">
<link href="custom.css" rel="stylesheet">

<script src="./PDPC_files/jquery.min.js"></script>
<script src="./PDPC_files/bootstrap.bundle.min.js"></script>
</head>

<body style="display:flex;flex-direction:column;justify-content:space-between;height:100vh;">

<!-- ================= HEADER ================= -->
<div>
<div class="container padding-left-right-15">

    <div class="row">
        <div class="col-sm-6 d-flex justify-content-around">
            <a href="https://www.pdpc.gov.sg/home">
                <img src="./PDPC_files/logo.png" alt="PDPC">
            </a>
            <div style="margin-top:22px;">
                <strong style="text-decoration:underline;">Who We Are</strong>
            </div>
        </div>

        <div class="col-md-6 d-none d-md-block">
            <div class="row justify-content-end">
                <div class="col-lg-5 col-md-5 padding-left-right-15">
                    <div class="input-group input-group-sm" style="margin-right:-20px;">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button">
                                <img src="https://eservice.pdpc.gov.sg/case/resources/img/search.svg">
                            </button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="banner-bar"></div>
</div>

<!-- ================= PEGA CONTAINER (VISIBLE) ================= -->
<div id="pegaContainer">
    <div class="container padding-left-right-15" style="margin:40px auto">

        <script src="https://areteans-i25-plf.pegatsdemo.com/prweb/PRRestService/c11nsvc/v1/pega-embed.js"></script>

        <pega-embed id="theEmbed"
            action="createCase"
            caseTypeID="Cred-IMDA-Work-DNCRequest"
            themeID="IMDA"
            casePage="assignment"
            appAlias="imda"
            pegaServerUrl="https://areteans-i25-plf.pegatsdemo.com/prweb/"
            UserIdentifier="Daniel Tan"
            Password="cnVsZXM="
            autoReauth="true"
            assignmentHeader="false"
            authService="pega"
            clientId="75564243042876277339"
            style="width:100%">
        </pega-embed>

    </div>
</div>

<!-- ================= FOOTER ================= -->
<div class="container-footer" style="margin-top:auto">
<div class="container">

    <div class="row footer d-none d-sm-flex">
        <div class="col-lg-12" style="font-size:16px;margin-top:10px;">
            PERSONAL DATA PROTECTION COMMISSION
        </div>

        <div class="col-lg-12">
            <ul class="footer-list" style="float:right;">
                <li><a href="https://go.gov.sg/pdpc-feedback" target="_blank">Feedback</a></li>
                <li>.</li>
                <li><a href="https://www.pdpc.gov.sg/contact-us" target="_blank">Contact Us</a></li>
            </ul>
        </div>
    </div>

    <hr>

    <div class="row footer d-none d-sm-flex">
        <div class="col-lg-12">
            <ul class="footer-list">
                <li><a href="https://tech.gov.sg/report_vulnerability" target="_blank">Report Vulnerability</a></li>
                <li>.</li>
                <li><a href="https://www.pdpc.gov.sg/privacy-statement" target="_blank">Privacy Statement</a></li>
                <li>.</li>
                <li><a href="https://www.pdpc.gov.sg/terms-and-conditions" target="_blank">Terms of Use</a></li>
                <li>.</li>
                <li><a href="https://www.reach.gov.sg/" target="_blank">REACH</a></li>
                <li>.</li>
                <li><a href="https://www.gov.sg/" target="_blank">Gov.sg</a></li>
            </ul>
        </div>

        <div class="col-lg-12 footerRight">
            <p>© 2024 Government of Singapore.</p>
            <p>Last updated on 27 November 2025</p>
            <p>Best supported by Microsoft Edge, Firefox and Chrome.</p>
        </div>
    </div>

</div>
</div>

<!-- ================= SCRIPT ================= -->
<script>
document.addEventListener("DOMContentLoaded", function () {

    startPegaWatcher();

    // -----------------------------------------
    // WATCH PEGA LOAD
    // -----------------------------------------
    function startPegaWatcher() {
        const interval = setInterval(() => {
            const pegaEmbed = document.querySelector('pega-embed');
            if (!pegaEmbed || !pegaEmbed.shadowRoot) return;

            clearInterval(interval);
            const shadow = pegaEmbed.shadowRoot;

            removeSummaryField(shadow);
            observeCaseCompletion(shadow);
        }, 500);
    }

    // -----------------------------------------
    // REMOVE SECONDARY SUMMARY FIELD
    // -----------------------------------------
    function removeSummaryField(shadow) {
        const removeTarget = () => {
            const el = shadow.querySelector('[data-testid=":summary-item:secondary"]');
            if (el) el.remove();
        };

        removeTarget();
        new MutationObserver(removeTarget)
            .observe(shadow, { childList: true, subtree: true });
    }

    // -----------------------------------------
    // SHOW SUCCESS AFTER CASE COMPLETION
    // -----------------------------------------
    function observeCaseCompletion(shadow) {

        const successHTML = `
            <div style="text-align:center;padding:50px 20px;">
                <div style="
                    width:100px;height:100px;margin:0 auto 25px;
                    background:#28a745;color:#fff;border-radius:50%;
                    font-size:50px;line-height:100px;font-weight:bold;">✓</div>
                <div style="font-size:22px;font-weight:600;color:#155724;">
                    Thank you!! Your request has been submitted.
                </div>
            </div>
        `;

        const checkCompletion = () => {
            const article = shadow.querySelector('article');
            if (!article) return;

            const formExists = article.querySelector('form');
            const headerExists = article.querySelector('[data-testid="assignment-header"]');

            if (!formExists && !headerExists && !article.dataset.successShown) {
                article.dataset.successShown = "true";
                article.innerHTML = successHTML;
            }
        };

        new MutationObserver(checkCompletion)
            .observe(shadow, { childList: true, subtree: true });

        setInterval(checkCompletion, 1000);
    }

});
</script>

</body>
</html>
