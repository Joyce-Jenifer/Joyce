/**
 * WOGAA.js
 * Version: 1.6.1-g15465851
 */
"use strict";var o=function(){return o=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},o.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;try{window.wogaaCustom=o(o({},window.wogaaCustom),{siteInfo:{"siteRSID":"wogaaeservicepdpcprod","acronym":"eservicepdpc","siteSection":"eservice.pdpc.gov.sg","txnSvcs":["PDPC-694","PDPC-1652","eservicepdpc-2589"],"environment":"production"}})}catch(o){console.error("WOGAA.js | SiteInfo initialization error. Please contact WOGAA team.")}var t,e,r;try{(r=document.createElement("meta")).name="wogaa_rsid",r.content=null===(e=null===(t=window.wogaaCustom)||void 0===t?void 0:t.siteInfo)||void 0===e?void 0:e.siteRSID,document.head.appendChild(r)}catch(o){console.error("WOGAA.js | Fail to add meta tag to header")}

// Snowplow Listener
!function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function a(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?t(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function o(e,t,a){return(t=r(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}"function"==typeof SuppressedError&&SuppressedError;var i=function(){function e(t,n,o){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._wogaaLayer=t,this._callback=n||function(){},this._unprocessed=[],this._executingListener=!1,this._model={},this._options=a({skipOldValues:!1},o),this._processStates(this._wogaaLayer,this._options.skipOldValues);var i=this._wogaaLayer.push;this._wogaaLayer.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=[].slice.call(t,0);o=o.map(function(e){return a(a({},e),{},{"wogaa.time":(new Date).getTime()})});var s=i.apply(r._wogaaLayer,o);return r._processStates(o,!1),s}}var t,o,r;return t=e,(o=[{key:"_processStates",value:function(e,t){for(this._unprocessed.push.apply(this._unprocessed,e);!1===this._executingListener&&this._unprocessed.length>0;){var n=this._unprocessed.shift();this._model=a(a({},n),this._model),t||(this._executingListener=!0,this._callback(this._model,n),this._executingListener=!1)}}},{key:"get",value:function(e,t){if(e){e=function(e){if("string"!=typeof e)return e;var t=[];return e.split(".").forEach(function(e){e.split(/\[([^}]+)\]/g).forEach(function(e){e.length>0&&t.push(e)})}),t}(e);for(var a=this._model,n=0;n<e.length;n++){if(!a[e[n]])return t;a=a[e[n]]}return a}return this._model}}])&&n(t.prototype,o),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=i;let c;const l=new Uint8Array(16);function g(){if(!c&&(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(l)}const u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));var d={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function p(e,t,a){if(d.randomUUID&&!t&&!e)return d.randomUUID();const n=(e=e||{}).random||(e.rng||g)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=n[e];return t}return function(e,t=0){return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}(n)}var h,w="wogaa.ongoing.txs";function _(){var e=window.sessionStorage.getItem(w);return e?function(e){try{return JSON.parse(e)}catch(e){return{}}}(e):{}}function y(e){window.sessionStorage.setItem(w,function(e){try{return JSON.stringify(e)}catch(e){return"{}"}}(e))}function v(e){return!(!e||""===e)&&(!!["staging"].includes(window.wogaaCustom.siteInfo.environment)||window.wogaaCustom.siteInfo.txnSvcs.includes(e))}function f(e){var t=_();return Object.prototype.hasOwnProperty.call(t,e)}!function(e){e.StartTS="START_TS",e.CompleteTS="COMPLETE_TS",e.TrackStructuredEvent="TRACK_STRUCTURED_EVENT",e.SetUserId="SET_USER_ID",e.SetIdentity="SET_IDENTITY",e.SearchSgSearchEvent="SEARCHSG_SEARCH_EVENT",e.SearchSgDisplayEvent="SEARCHSG_DISPLAY_EVENT",e.SearchSgClickEvent="SEARCHSG_CLICK_EVENT",e.SearchSgRateEvent="SEARCHSG_RATE_EVENT",e.SearchSgSessionInitEvent="SEARCHSG_SESSION_INIT_EVENT",e.SearchSgGeneratedAnswer="SEARCHSG_GENERATED_ANSWER",e.SearchSgGeneratedAnswerInteraction="SEARCHSG_GENERATED_ANSWER_INTERACTION",e.TrackCustomEvent="TRACK_CUSTOM_EVENT"}(h||(h={}));var S,m,E="Snowplow Listener",b=window.wogaaCustom,k=window.wogaaCustom.log,x=window.wogaa_snowplow,T={search_context:"iglu:sg.wogaa.iglu/search_context/jsonschema/1-1-0",search_result_context:"iglu:sg.gov.tech/search_result_context/jsonschema/1-0-4",search_result_interaction_context:"iglu:sg.gov.tech/search_result_interaction_context/jsonschema/1-0-2",search_result_rating_context:"iglu:sg.gov.tech/search_result_rating_context/jsonschema/1-0-1",search_session_context:"iglu:sg.wogaa.iglu/search_session_context/jsonschema/2-1-0",generated_answer_context:"iglu:sg.wogaa.iglu/generated_answer_context/jsonschema/2-0-0",generated_answer_interaction_context:"iglu:sg.wogaa.iglu/generated_answer_interaction_context/jsonschema/2-0-0"},j=function(e,t){return t&&e.push({schema:T.search_session_context,data:t}),e};function I(e,t){var a=[];for(var n in t)t[n]&&T[n]&&a.push({schema:T[n],data:t[n]});0!==a.length?window.wogaa_snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:sg.wogaa.iglu/searchsg-event/jsonschema/2-0-0",data:{eventName:e}},context:a}):k(E,"".concat(e," SearchSg event cancelled, Context Payload data is empty"),{payload:t})}function O(e,t){var a,n,o,r;try{switch(t.type){case h.StartTS:var i=t.payload.trackingId,s=t.payload.options.uniqueTransactionId;if(k(E,"ST event init",{payload:t}),v(i))if(k(E,"tracking is valid",{payload:t}),f(i))k(E,"trackingId already available in session to start transaction",{payload:t});else{k(E,"trackingId not available in session",{payload:t});var c=function(e,t){var a=_(),n=t||p();return a[e]=n,y(a),n}(i,s);k(E,"added tracking id"),x("trackStructEvent:wog",{category:"transactionalService",action:"start",label:i,property:c}),k(E,"snowplow start transactional service fired",{payload:t})}else k(E,"tracking is not valid. Ignoring ST",{payload:t});break;case h.CompleteTS:i=t.payload.trackingId,s=t.payload.options.uniqueTransactionId;if(k(E,"CT event init",{payload:t.payload}),v(i))if(k(E,"trackingId is valid",{payload:t.payload}),s||!s&&f(i)){k(E,"trackingId available in session",{payload:t.payload});c=function(e,t){var a=_(),n=t||a[e];return delete a[e],y(a),n}(t.payload.trackingId,s);x("trackStructEvent:wog",{category:"transactionalService",action:"complete",label:i,property:c}),k(E,"snowplow complete transactional service fired",{payload:t.payload})}else k(E,"trackingId not available in session to complete transaction",{payload:t.payload});else k(E,"tracking is not valid. Ignoring CT",{payload:t.payload});break;case h.TrackStructuredEvent:var l=t.payload,g=l.category,u=l.action,d=l.label,w=l.property,S=l.value;k(E,"firing snowplow structured event",{payload:t.payload}),x("trackStructEvent:wog",{category:g,action:u,label:d,property:w,value:S});break;case h.SetUserId:var m=t.payload.id;k(E,"firing snowplow set user id",{payload:t.payload}),x("setUserId:wog",m);break;case h.SetIdentity:m=t.payload.id;k(E,"set snowplow identity context",{payload:t.payload}),x("addGlobalContexts",[{schema:"iglu:sg.wogaa.iglu/identity_context/jsonschema/1-0-0",data:{id:m}}]);break;case h.SearchSgSearchEvent:var b=[{schema:T.search_context,data:t.payload.search_context}];b=j(b,null===(a=t.payload)||void 0===a?void 0:a.search_session_context),window.wogaa_snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:sg.wogaa.iglu/searchsg_search/jsonschema/1-0-0",data:{}},context:b});break;case h.SearchSgDisplayEvent:b=[{schema:T.search_context,data:t.payload.search_context},{schema:T.search_result_context,data:t.payload.search_result_context}];b=j(b,null===(n=t.payload)||void 0===n?void 0:n.search_session_context),window.wogaa_snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:sg.wogaa.iglu/searchsg_display/jsonschema/1-0-0",data:{}},context:b});break;case h.SearchSgClickEvent:b=[{schema:T.search_context,data:t.payload.search_context},{schema:T.search_result_context,data:t.payload.search_result_context},{schema:T.search_result_interaction_context,data:t.payload.search_result_interaction_context}];b=j(b,null===(o=t.payload)||void 0===o?void 0:o.search_session_context),window.wogaa_snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:sg.wogaa.iglu/searchsg_click/jsonschema/1-0-0",data:{}},context:b});break;case h.SearchSgRateEvent:b=[{schema:T.search_context,data:t.payload.search_context},{schema:T.search_result_context,data:t.payload.search_result_context},{schema:T.search_result_interaction_context,data:t.payload.search_result_interaction_context},{schema:T.search_result_rating_context,data:t.payload.search_result_rating_context}];b=j(b,null===(r=t.payload)||void 0===r?void 0:r.search_session_context),window.wogaa_snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:sg.wogaa.iglu/searchsg_rate/jsonschema/1-0-0",data:{}},context:b});break;case h.SearchSgSessionInitEvent:b=[{schema:T.search_session_context,data:t.payload.search_session_context}];window.wogaa_snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:sg.wogaa.iglu/searchsg_session_init/jsonschema/1-0-0",data:{}},context:b});break;case h.SearchSgGeneratedAnswer:I("generated_answer",t.payload);break;case h.SearchSgGeneratedAnswerInteraction:I("generated_answer_interaction",t.payload);break;case h.TrackCustomEvent:var O=t.payload,R=(g=O.category,u=O.action,d=O.label,w=O.property,S=O.value,O.project),C=O.projectVersion,A=O.jsonContent;if(R&&C&&u&&g){var P={schema:"iglu:sg.wogaa.iglu/wogaa-custom-context/jsonschema/1-0-0",data:{action:u,category:g,label:d,property:w,value:S,content:A}};window.wogaa_snowplow("trackSelfDescribingEvent",{event:{schema:"iglu:sg.wogaa.iglu/wogaa-custom-event/jsonschema/1-0-0",data:{project:R,projectVersion:C}},context:[P]})}else k(E,"ERROR: project, projectVersion, action or category supplied in the parameters are invalid",{payload:t.payload})}}catch(e){k(E,"ERROR: Error while processing wogaa layer event",t,e)}}(S=function(){if(b.hasTrackerInitialized)k(E,"ERROR: Snowplow tracker is already initialized");else{b.enableAET=false,x("newTracker","wog","https://snowplow-web.wogaa.sg",{appId:"wogaaeservicepdpcprod",contexts:{webPage:!0,performanceTiming:!0},cookieSameSite:"https:"===window.location.protocol?"Strict":"Lax",cookieSecure:"https:"===window.location.protocol,discoverRootDomain:!0,postPath:"/sg.wogaa/cs1"}),b.enableAET?(x("enableErrorTracking",{filter:function(t){var a,n;return(null===(a=t.message)||void 0===a?void 0:a.trim())||b.trackingError(e(e({},t),{message:"Unhandledrejection Error ðŸš¨"})),!!(null===(n=t.message)||void 0===n?void 0:n.trim())}}),console.log("âœ… Automatic Error Tracking")):b.trackingError=function(){console.log("â›” This site is not enabled for tracking error.")},b.hasTrackerInitialized=!0,b.hasPagePing=false,b.hasPagePing&&x("enableActivityTracking:wog",{minimumVisitLength:30,heartbeatDelay:10}),x("enableLinkClickTracking:wog"),window.addEventListener("locationchange",function(){x("trackPageView:wog"),x("refreshLinkClickTracking:wog")});var t=function(e,t){var a,n=this;return void 0===t&&(t=0),function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];clearTimeout(a),a=setTimeout(function(){e.apply(n,o)},t)}}(function(){x("trackPageView:wog")},0);window.addEventListener("load",t),new s(window.wogaaLayer,O,{})}},m=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m?void 0:(m=!0,S.apply(this,e))})()}();